<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="UTF-8">
  <title>Local Storage To-Do List</title>
</head>

<body>

  <h1>To-Do List Persisted with Local Storage</h1>

  <form>
    <input type="text">
    <input type="submit" value="save">
  </form>

  <div id="todo-list"></div>

  <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
  <script type="text/javascript">
    var list = JSON.parse(localStorage.getItem("todolist"));

    //console.log(localStorage.getItem("name"))

    // Checks to see if the todolist exists in localStorage and is an array currently
    // If not, set a local list variable to an empty array
    // Otherwise list is our current list of todos
    if (!Array.isArray(list)) {
      list = [];
    }

    function putOnPage() 
    {

    $("#todo-list").empty(); // empties out the html

      var insideList = JSON.parse(localStorage.getItem("todolist"));

      // Checks to see if we have any todos in localStorage
      // If we do, set the local insideList variable to our todos
      // Otherwise set the local insideList variable to an empty array
      if (!Array.isArray(insideList)) {
        insideList = [];
      }

      // if(localStorage.getItem("completedlist").length){
      //   console.log("there is a val!");
      // }
      // else{
      //   console.log("there is no completedlist");
      // }
     // console.log(localStorage.getItem("highscore"));

      // render our insideList todos to the page
      for (var i = 0; i < insideList.length; i++) {
        var p = $("<p>").text(insideList[i]);
        var b = $("<button class='delete'>").text("x").attr("data-index", i);
        

        //paragraph area, we are going to stick the button area (button area before the paragraph area = prepend)

        //prepend = we stick the button area to the paragraph area
        p.prepend(b);

        //append = inside paragraph area we stick the button.
        //p.append(b);
        $("#todo-list").prepend(p);
      }
    }

    // render our todos on page load
    putOnPage();

    $(document).on("click", "button.delete", function() {
      var todolist = JSON.parse(localStorage.getItem("todolist"));
      var currentIndex = $(this).attr("data-index");
      console.log("index"+ $(this).attr("data-index"));

      // Deletes the item marked for deletion
      todolist.splice(currentIndex, 1);
      list = todolist;
      console.log("list"+list)

      localStorage.setItem("todolist", JSON.stringify(todolist));

      putOnPage();
    });

    $("input[type='submit']").on("click", function(event) {
      event.preventDefault();
      // Setting the input value to a variable and then clearing the input
      var val = $("input[type='text']").val();
      $("input[type='text']").val("");

      // Adding our new todo to our local list variable and adding it to local storage
      list.push(val);
      localStorage.setItem("todolist", JSON.stringify(list));
      console.log(" List Array: "+list)

      putOnPage();
    });
  </script>
</body>

</html>


=================================





//==================TIMER NOTES================================


//       var timeEl = document.querySelector(".time");
// var mainEl = document.getElementById("main");

// var secondsLeft = 10;

// function setTime() {
//   var timerInterval = setInterval(function() {
//     secondsLeft--;
//     timeEl.textContent = secondsLeft + " seconds left until GAME OVER.";

//     if(secondsLeft === 0) {
//       clearInterval(timerInterval);
//       sendMessage();
//     }

//   }, 1000);
// }

var list = JSON.parse(localStorage.getItem("todolist"));


if (!Array.isArray(list)) {
  list = [];
}

function putOnPage() 
{
$("#todo-list").empty(); // empties out the html

  var insideList = JSON.parse(localStorage.getItem("todolist"));



  if (!Array.isArray(insideList)) {
    insideList = [];
  }

  for (var i = 0; i < insideList.length; i++) {
    var p = $("<p>").text(insideList[i]);
    inputInitials = document.createElement("input");


    p.prepend(b);

    $("#todo-list").prepend(p);
  }
}

    // render our todos on page load
    putOnPage();

    $(document).on("click", "button.delete", function() {
      var todolist = JSON.parse(localStorage.getItem("todolist"));
      var currentIndex = $(this).attr("data-index");
      console.log("index"+ $(this).attr("data-index"));
    

      localStorage.setItem("todolist", JSON.stringify(todolist));

      putOnPage();
    });

    $("input[type='submit']").on("click", function(event) {
      event.preventDefault();
      // Setting the input value to a variable and then clearing the input
      var val = $("input[type='text']").val();
      $("input[type='text']").val("");

      // Adding our new todo to our local list variable and adding it to local storage
      list.push(val);
      localStorage.setItem("todolist", JSON.stringify(list));
      console.log(" List Array: "+list)

      putOnPage();
    });